webpackJsonp([1],{"/OTs":function(e,t){},0:function(e,t){},1:function(e,t){},FfRt:function(e,t){},"GiC/":function(e,t){},Je1G:function(e,t){},K6I3:function(e,t){},KCao:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("7+uW"),s=a("Xxa5"),i=a.n(s),r=a("exGp"),c=a.n(r),o={name:"App",data:function(){return{activeUser:null}},created:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.refreshActiveUser();case 2:case"end":return t.stop()}},t,e)}))()},watch:{$route:"refreshActiveUser"},methods:{login:function(){this.$auth.loginRedirect()},refreshActiveUser:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.getUser();case 2:e.activeUser=t.sent;case 3:case"end":return t.stop()}},t,e)}))()},logout:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.logout();case 2:return t.next=4,e.refreshActiveUser();case 4:e.$router.push("/");case 5:case"end":return t.stop()}},t,e)}))()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"top"},[a("router-link",{attrs:{to:"/week"}},[e._v("Planning")]),e._v(" "),a("router-link",{attrs:{to:"/recipes"}},[e._v("Recipes")])],1),e._v(" "),a("router-view"),e._v(" "),a("footer",[e.activeUser?a("span",{attrs:{id:"logout-button"},on:{click:e.logout}},[e._v("Logout ")]):a("span",{attrs:{id:"login-button"},on:{click:e.login}},[e._v(" Login ")])])],1)},staticRenderFns:[]};var u=a("VU/8")(o,l,!1,function(e){a("zMri")},null,null).exports,d=a("/ocq"),p=a("4xpL"),m=a.n(p),h=a("M4fF"),f=a.n(h),v=a("BAfL"),_=a.n(v),k=a("mtWM"),w=a.n(k).a.create({baseURL:"https://24md50p2t2.execute-api.us-east-1.amazonaws.com/dev/",json:!0}),g={execute:function(e,t,a,s){var r=this;return c()(i.a.mark(function c(){var o;return i.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n.a.prototype.$auth.getAccessToken();case 2:return o=i.sent,i.abrupt("return",w({method:e,url:t,data:a,params:s,headers:{Authorization:"Bearer "+o}}).then(function(e){return e.data},function(e){console.lgo("API error"),console.log(e)}));case 4:case"end":return i.stop()}},c,r)}))()}},j=function(){return g.execute("get","/recipes/wpidmap")},x=function(){return g.execute("get","/meals/wpidmap")},y={name:"importRecipes",data:function(){return{theText:"",fileLoaded:!1,parsed:0,stored:0,updated:0,wpIdMap:void 0}},created:function(){var e=this;j().then(function(t){e.wpIdMap=t.map},function(e){console.log(e)})},methods:{fileUploaded:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.readAsText(a),n.onloadend=function(){t.theText=n.result,t.fileLoaded=!0}},importXML:function(){var e=this;if(!this.wpIdMap)return alert("Something is wrong with the map. Aborted import.");var t=JSON.parse(_.a.xml2json(this.theText,{compact:!0,spaces:4})),a=f.a.filter(t.rss.channel.item,{"wp:post_type":{_cdata:"recipe"}});console.log(a),a.forEach(function(t){var a=f.a.filter(t["wp:postmeta"],{"wp:meta_key":{_cdata:"url"}})[0],n={title:t.title._text,comment:t["content:encoded"]._cdata,url:a?a["wp:meta_value"]._cdata:void 0,wpId:t["wp:post_id"]._text};e.parsed++,e.wpIdMap[parseInt(n.wpId)]?(n._id=e.wpIdMap[parseInt(n.wpId)]._id,e.$store.dispatch("recipes/updateRecipe",n).then(function(){e.updated++})):e.$store.dispatch("recipes/addRecipe",n).then(function(){e.stored++}),console.log(n)})}}},M={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.wpIdMap?e._e():a("span",[e._v("Map not loaded")]),e._v(" "),a("input",{attrs:{type:"file",name:"fileToUpload",id:"fileToUpload"},on:{change:e.fileUploaded}}),e._v(" "),a("button",{attrs:{disabled:!e.fileLoaded},on:{click:e.importXML}},[e._v("Go")]),e._v(" "),a("p",[e._v("\n    Parsed: "+e._s(e.parsed)+"\n  ")]),e._v(" "),a("p",[e._v("\n    Stored: "+e._s(e.stored)+" | Updated: "+e._s(e.updated)+"\n  ")])])},staticRenderFns:[]};var R=a("VU/8")(y,M,!1,function(e){a("Je1G")},"data-v-5da6f9c7",null).exports,b={name:"importMeals",data:function(){return{theText:"",fileLoaded:!1,parsed:0,stored:0,updated:0,recipesWpIdMap:void 0,mealsWpIdMap:void 0}},created:function(){var e=this;j().then(function(t){e.recipesWpIdMap=t.map},function(e){console.log(e)}),x().then(function(t){e.mealsWpIdMap=t.map},function(e){console.log(e)})},methods:{fileUploaded:function(e){var t=this,a=e.target.files[0],n=new FileReader;n.readAsText(a),n.onloadend=function(){t.theText=n.result,t.fileLoaded=!0}},importXML:function(){var e=this;if(!this.recipesWpIdMap)return alert("Something is wrong with the map. Aborted import.");var t=JSON.parse(_.a.xml2json(this.theText,{compact:!0,spaces:4})),a=function(e,t){return f.a.filter(e["wp:postmeta"],{"wp:meta_key":{_cdata:t}})[0]?f.a.filter(e["wp:postmeta"],{"wp:meta_key":{_cdata:t}})[0]["wp:meta_value"]._cdata:void 0};f.a.filter(t.rss.channel.item,{"wp:post_type":{_cdata:"meal"}}).forEach(function(t){var n=a(t,"recipes");n&&("a:0:{}"===n?n=void 0:(n=(n=(n=n.replace(/a:[0-9]:\{i:[0-9];s:[0-9]:/,"[")).replace(/;\}/,"]")).replace(/;i:[0-9];s:[0-9]:/g,","),n=(n=JSON.parse(n)).map(function(t){var a=e.recipesWpIdMap[parseInt(t)];if(a)return a._id})));var s={title:t.title._text,made:void 0!==a(t,"made"),comment:a(t,"comment"),date:new Date(a(t,"date")),recipes:n,wpId:t["wp:post_id"]._text};e.parsed++,e.mealsWpIdMap[parseInt(s.wpId)]?(s._id=e.mealsWpIdMap[parseInt(s.wpId)]._id,e.$store.dispatch("meals/updateMeal",s).then(function(){e.updated++})):e.$store.dispatch("meals/addMeal",s).then(function(){e.stored++}),console.log(s)})}}},C={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[e.recipesWpIdMap&&e.mealsWpIdMap?e._e():a("span",[e._v("Map not loaded")]),e._v(" "),a("input",{attrs:{type:"file",name:"fileToUpload",id:"fileToUpload"},on:{change:e.fileUploaded}}),e._v(" "),a("button",{attrs:{disabled:!e.fileLoaded},on:{click:e.importXML}},[e._v("Go")]),e._v(" "),a("p",[e._v("\n    Parsed: "+e._s(e.parsed)+"\n  ")]),e._v(" "),a("p",[e._v("\n    Stored: "+e._s(e.stored)+" | Updated: "+e._s(e.updated)+"\n  ")])])},staticRenderFns:[]};var W=a("VU/8")(b,C,!1,function(e){a("GiC/")},"data-v-74211c46",null).exports,I={name:"welcome",mounted:function(){var e=this;return c()(i.a.mark(function t(){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$auth.isAuthenticated();case 2:if(!t.sent){t.next=4;break}e.$router.push("/week");case 4:case"end":return t.stop()}},t,e)}))()}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"welcome"},[a("h1",[e._v("Welcome")]),e._v(" "),a("button",{attrs:{id:"login-button"},on:{click:function(t){e.$auth.loginRedirect("/week")}}},[e._v(" Login ")])])},staticRenderFns:[]};var S=a("VU/8")(I,D,!1,function(e){a("KCao")},"data-v-171a12e3",null).exports,L=a("PJh5"),A=a.n(L),E=a("Dd8w"),$=a.n(E),N=a("NYxO"),T=function(){return g.execute("get","/meals")},z=function(e){return g.execute("get","/meals",null,e)},U=function(e){return g.execute("post","/meals",e)},P=function(e){return g.execute("put","/meals/"+e._id,e)},F=function(e){return g.execute("delete","/meals/"+e)},O=function(){return g.execute("get","/recipes")},q=function(e){return g.execute("post","/recipes",e)},V=function(e){return g.execute("put","/recipes/"+e._id,e)},B=function(e){return g.execute("delete","/recipes/"+e)},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editRecipe"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.recipeData.title,expression:"recipeData.title"}],attrs:{type:"text",name:"title",placeholder:"TITLE"},domProps:{value:e.recipeData.title},on:{input:function(t){t.target.composing||e.$set(e.recipeData,"title",t.target.value)}}})]),e._v(" "),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.recipeData.url,expression:"recipeData.url"}],attrs:{type:"url",name:"url",placeholder:"URL"},domProps:{value:e.recipeData.url},on:{input:function(t){t.target.composing||e.$set(e.recipeData,"url",t.target.value)}}})]),e._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.recipeData.comment,expression:"recipeData.comment"}],attrs:{rows:"15",cols:"15",placeholder:"COMMENT"},domProps:{value:e.recipeData.comment},on:{input:function(t){t.target.composing||e.$set(e.recipeData,"comment",t.target.value)}}})]),e._v(" "),a("div",[a("button",{staticClass:"app_recipe_btn",on:{click:e.saveRecipe}},[e._v("Save")])])])},staticRenderFns:[]};var X=a("VU/8")({name:"EditRecipe",props:["recipeData"],data:function(){return{}},methods:{saveRecipe:function(){this.$emit("save-recipe",this.recipeData)}}},K,!1,function(e){a("/OTs")},null,null).exports,Y={name:"recipe",props:["id"],components:{EditRecipe:X},data:function(){return{editMode:!1}},mounted:function(){},computed:{recipe:function(){return this.$store.getters["recipes/recipeById"](this.id)}},methods:{updateRecipe:function(e){var t=this;return c()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,V(e);case 2:t.editMode=!1;case 3:case"end":return a.stop()}},a,t)}))()}}},G={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recipe"},[e.recipe?a("div",[e.editMode?e._e():a("div",[a("h2",[e.recipe.url?a("a",{attrs:{href:e.recipe.url,target:"_blank"}},[e._v(e._s(e.recipe.title))]):a("span",[e._v(e._s(e.recipe.title))])]),e._v(" "),a("p",[e._v("\n        "+e._s(e.recipe.comment)+"\n      ")]),e._v(" "),a("button",{on:{click:function(t){e.editMode=!0}}},[e._v("Edit")])]),e._v(" "),e.editMode?a("edit-recipe",{attrs:{recipeData:e.recipe},on:{"save-recipe":e.updateRecipe}}):e._e()],1):a("div",[e._v("\n    Something is wrong with this recipe\n  ")])])},staticRenderFns:[]};var H=a("VU/8")(Y,G,!1,function(e){a("jj9N")},"data-v-6822c5dd",null).exports,J={name:"EditMeal",props:["week","year","mealData"],data:function(){return{searchKeys:["title","comment"],searchTerm:"",recipeSearchResults:[],resultPage:0,resultsPerPage:5,expandTextarea:!1}},created:function(){var e=this;this.$on("searchChanged",function(t){e.recipeSearchResults=t}),this.$on("searchInputChanged",function(t){e.searchTerm=t,e.resultPage=0})},computed:{sliceStart:function(){return this.resultPage*this.resultsPerPage},sliceEnd:function(){return(this.resultPage+1)*this.resultsPerPage},recipeList:function(){var e=this;return f.a.map(this.$store.getters["recipes/recipeList"],function(t){return{_id:t._id,title:t.title,selected:-1!==e.mealData.recipes.indexOf(t._id)}})},recipeSearchResultsList:function(){var e=this;return this.recipeSearchResults.filter(function(t){return-1===e.mealData.recipes.indexOf(t._id)})},selectedRecipes:function(){return f.a.filter(this.recipeList,{selected:!0})},date:function(){return this.mealData.date?this.mealData.date:this.week&&this.year?A()().isoWeek(this.week).isoWeekYear(this.year).startOf("isoWeek").toDate():A()().startOf("isoWeek").toDate()}},methods:{selectRecipe:function(e){this.mealData.recipes.push(e)},removeRecipe:function(e){this.mealData.recipes.splice(this.mealData.recipes.indexOf(e),1)},saveMeal:function(){this.mealData.date=this.date,this.$emit("save-meal",this.mealData)}}},Q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editMeal"},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.mealData.title,expression:"mealData.title"}],attrs:{type:"text",name:"title",placeholder:"Title"},domProps:{value:e.mealData.title},on:{input:function(t){t.target.composing||e.$set(e.mealData,"title",t.target.value)}}})]),e._v(" "),a("div",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.mealData.comment,expression:"mealData.comment"}],class:{collapsed:!e.expandTextarea},attrs:{placeholder:"Comment"},domProps:{value:e.mealData.comment},on:{focus:function(t){e.expandTextarea=!0},blur:function(t){e.expandTextarea=0!==e.mealData.comment.length},input:function(t){t.target.composing||e.$set(e.mealData,"comment",t.target.value)}}})]),e._v(" "),a("div",[a("vue-fuse",{attrs:{placeholder:"Search recipe",list:e.recipeList,keys:e.searchKeys,"event-name":"searchChanged","input-change-event-name":"searchInputChanged",defaultAll:!1,value:e.searchTerm}}),e._v(" "),e.recipeSearchResultsList.length?a("ul",[e._l(e.recipeSearchResultsList.slice(e.sliceStart,e.sliceEnd+1),function(t){return a("li",{key:t._id,on:{click:function(a){e.selectRecipe(t._id)}}},[a("div",{staticClass:"btn btn-sm pull-right"},[e._v("Add")]),e._v("\n        "+e._s(t.title)+"\n      ")])}),e._v(" "),e.sliceEnd<e.recipeSearchResultsList.length?a("li",{staticClass:"text-center"},[a("span",{staticClass:"btn btn-sm",on:{click:function(t){e.resultPage++}}},[e._v("Show more")])]):e._e()],2):e._e(),e._v(" "),e.searchTerm&&0===e.recipeSearchResultsList.length?a("p",[e._v("\n      No results\n    ")]):e._e(),e._v(" "),a("h3",[e._v("Selected recipes")]),e._v(" "),e.selectedRecipes.length?a("ul",e._l(e.selectedRecipes,function(t){return a("li",{key:t._id},[a("span",{staticClass:"btn btn-sm pull-right",on:{click:function(a){e.removeRecipe(t._id)}}},[e._v("Remove")]),e._v("\n        "+e._s(t.title)+"\n      ")])})):e._e(),e._v(" "),0===e.selectedRecipes.length?a("p",{staticClass:"text-disabled"},[e._v("\n      Search to add recipes to this meal.\n    ")]):e._e()],1),e._v(" "),a("div",{staticClass:"clear"},[a("button",{staticClass:"btn-primary pull-right",on:{click:e.saveMeal}},[e._v("Save")])])])},staticRenderFns:[]};var Z=a("VU/8")(J,Q,!1,function(e){a("otDY")},"data-v-33f6399d",null).exports,ee={name:"meal",props:["meal"],components:{Recipe:H,EditMeal:Z},data:function(){return{editMode:!1}},methods:$()({},Object(N.b)("meals",{deleteMeal:"deleteMeal"}),{updateMeal:function(e){var t=this;return c()(i.a.mark(function a(){return i.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,P(e);case 2:t.editMode=!1;case 3:case"end":return a.stop()}},a,t)}))()},moveToPrevWeek:function(){this.meal.date=A()(this.meal.date).add(-1,"w").toDate(),this.updateMeal(this.meal)},moveToNextWeek:function(){this.meal.date=A()(this.meal.date).add(1,"w").toDate(),this.updateMeal(this.meal)},toggleMade:function(){this.meal.made=!this.meal.made,this.updateMeal(this.meal)}})},te={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"meal"},[e.editMode||e.meal.made?e._e():a("div",[a("div",{staticClass:"toolbar"},[a("i",{staticClass:"fal fa-pen",on:{click:function(t){e.editMode=!0}}}),e._v(" "),a("i",{staticClass:"fal fa-trash-alt",on:{click:function(t){e.deleteMeal(e.meal._id)}}})]),e._v(" "),a("h2",{on:{click:e.toggleMade}},[a("i",{staticClass:"fal fa-square"}),e._v(" "+e._s(e.meal.title))]),e._v(" "),e.meal.comment?a("p",[e._v("\n      "+e._s(e.meal.comment)+"\n    ")]):e._e(),e._v(" "),e._l(e.meal.recipes,function(e){return a("recipe",{key:e,attrs:{id:e}})}),e._v(" "),a("span",{staticClass:"btn",on:{click:e.moveToPrevWeek}},[a("i",{staticClass:"fal fa-arrow-left"}),e._v(" To prev. week")]),e._v(" "),a("span",{staticClass:"btn pull-right",on:{click:e.moveToNextWeek}},[e._v("To next week "),a("i",{staticClass:"fal fa-arrow-right"})])],2),e._v(" "),!e.editMode&&e.meal.made?a("div",[a("h2",{on:{click:e.toggleMade}},[a("i",{staticClass:"fal fa-check-square"}),e._v(" "),a("span",{staticClass:"text-disabled"},[e._v(e._s(e.meal.title))])])]):e._e(),e._v(" "),e.editMode?a("edit-meal",{attrs:{mealData:e.meal},on:{"save-meal":e.updateMeal}}):e._e()],1)},staticRenderFns:[]};var ae=a("VU/8")(ee,te,!1,function(e){a("hDnw")},"data-v-56c93505",null).exports,ne={title:"",comment:"",recipes:[]},se={name:"NewMeal",props:["week","year"],components:{EditMeal:Z},data:function(){return{mealData:f.a.clone(ne),expanded:!1}},methods:{addMeal:function(e){var t=this;this.$store.dispatch("meals/addMeal",e).then(function(){t.mealData=f.a.clone(ne)})}}},ie={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"meal"},[e.expanded?a("div",[a("div",{staticClass:"toolbar"},[a("i",{staticClass:"fal fa-times",on:{click:function(t){e.expanded=!1}}})]),e._v(" "),a("h2",[e._v("Add Meal")]),e._v(" "),a("edit-meal",{attrs:{week:e.week,year:e.year,mealData:e.mealData},on:{"save-meal":e.addMeal}})],1):a("div",[a("button",{on:{click:function(t){e.expanded=!0}}},[e._v("Add meal")])])])},staticRenderFns:[]};var re=a("VU/8")(se,ie,!1,function(e){a("FfRt")},"data-v-1f27dba3",null).exports,ce={name:"week",components:{Meal:ae,NewMeal:re},mounted:function(){this.loadMealsInWeek(this.currentWeek),this.$store.dispatch("recipes/loadRecipeList")},computed:{week:function(){return parseInt(this.$route.params.week)||A()().isoWeek()},year:function(){return parseInt(this.$route.params.year)||A()().isoWeekYear()},currentWeek:function(){return{week:this.week,year:this.year}},nextWeek:function(){var e=A()().isoWeekYear(this.year).isoWeek(this.week).startOf("isoWeek").add(1,"w");return{week:e.isoWeek(),year:e.isoWeekYear()}},prevWeek:function(){var e=A()().isoWeekYear(this.year).isoWeek(this.week).startOf("isoWeek").add(-1,"w");return{week:e.isoWeek(),year:e.isoWeekYear()}},mealsInCurrentWeek:function(){return this.$store.getters["meals/mealsInWeek"](this.currentWeek)}},watch:{week:function(){this.loadMealsInWeek(this.currentWeek)}},methods:{loadMealsInWeek:function(e){this.$store.dispatch("meals/loadMealsInWeek",e)}}},oe={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"week"},[a("header",[a("router-link",{staticClass:"weekNav",attrs:{to:{name:"Week",params:{week:e.prevWeek.week,year:e.prevWeek.year}}}},[a("i",{staticClass:"fa fa-arrow-left"})]),e._v(" "),a("h1",[a("router-link",{attrs:{to:"/week"}},[e._v("Week "+e._s(e.week))])],1),e._v(" "),a("router-link",{staticClass:"weekNav",attrs:{to:{name:"Week",params:{week:e.nextWeek.week,year:e.nextWeek.year}}}},[a("i",{staticClass:"fa fa-arrow-right"})])],1),e._v(" "),a("new-meal",{attrs:{week:e.week,year:e.year}}),e._v(" "),e._l(e.mealsInCurrentWeek,function(e){return a("meal",{key:e.id,attrs:{meal:e}})})],2)},staticRenderFns:[]};var le=a("VU/8")(ce,oe,!1,function(e){a("uSYS")},"data-v-f03cd716",null).exports,ue={name:"meals",computed:$()({},Object(N.c)("meals",{meals:"list"})),mounted:function(){this.$store.dispatch("meals/loadMealList")},methods:$()({},Object(N.b)("meals",{deleteMeal:"deleteMeal"}))},de={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"meals"},[a("h1",[e._v("Meals")]),e._v(" "),e.meals.length>0?a("div",{staticClass:"table-wrap"},[a("div",[a("router-link",{attrs:{to:{name:"NewMeal"}}},[e._v("Add Meal")])],1),e._v(" "),a("table",[e._m(0),e._v(" "),e._l(e.meals,function(t){return a("tr",{key:t._id,class:{made:t.made}},[a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.made,expression:"meal.made"}],attrs:{type:"checkbox",disabled:""},domProps:{checked:Array.isArray(t.made)?e._i(t.made,null)>-1:t.made},on:{change:function(a){var n=t.made,s=a.target,i=!!s.checked;if(Array.isArray(n)){var r=e._i(n,null);s.checked?r<0&&e.$set(t,"made",n.concat([null])):r>-1&&e.$set(t,"made",n.slice(0,r).concat(n.slice(r+1)))}else e.$set(t,"made",i)}}})]),e._v(" "),a("td",[e._v(e._s(t.date))]),e._v(" "),a("td",[e._v(e._s(t.title))]),e._v(" "),a("td",[e._v(e._s(t.comment))]),e._v(" "),a("td",{attrs:{align:"center"}},[a("router-link",{attrs:{to:{name:"EditMeal",params:{id:t._id}}}},[e._v("Edit")]),e._v(" |\n          "),a("a",{attrs:{href:"#"},on:{click:function(a){e.deleteMeal(t._id)}}},[e._v("Delete")])],1)])})],2)]):a("div",[e._v("\n    There are no meals.. Lets add one now "),a("br"),a("br"),e._v(" "),a("router-link",{staticClass:"add_meal_link",attrs:{to:{name:"NewMeal"}}},[e._v("Add Meal")])],1)])},staticRenderFns:[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",[a("td",[e._v("Made")]),e._v(" "),a("td",[e._v("Date")]),e._v(" "),a("td",[e._v("Title")]),e._v(" "),a("td",{attrs:{width:"550"}},[e._v("Comment")]),e._v(" "),a("td",{attrs:{width:"100",align:"center"}},[e._v("Action")])])}]};var pe=a("VU/8")(ue,de,!1,function(e){a("y/Yf")},null,null).exports,me={name:"recipes",data:function(){return{searchKeys:["title","comment"],recipeSearchResults:[]}},computed:$()({},Object(N.c)("recipes",{recipes:"list"})),created:function(){var e=this;this.$on("searchChanged",function(t){e.recipeSearchResults=t})},mounted:function(){this.$store.dispatch("recipes/loadRecipeList")},methods:$()({},Object(N.b)("recipes",{deleteRecipe:"deleteRecipe"}))},he={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recipes"},[e._m(0),e._v(" "),e.recipes.length>0?a("div",{staticClass:"table-wrap"},[a("div",[a("router-link",{attrs:{to:{name:"NewRecipe"}}},[e._v("Add Recipe")])],1),e._v(" "),a("vue-fuse",{attrs:{placeholder:"Search recipe",list:e.recipes,keys:e.searchKeys,"event-name":"searchChanged",defaultAll:!0}}),e._v(" "),a("table",[e._m(1),e._v(" "),e._l(e.recipeSearchResults,function(t){return a("tr",{key:t._id,class:{made:t.made}},[t.url?a("td",[a("a",{attrs:{href:t.url}},[e._v(e._s(t.title))])]):a("td",[e._v(e._s(t.title))]),e._v(" "),a("td",[e._v(e._s(t.comment))]),e._v(" "),a("td",{attrs:{align:"center"}},[a("router-link",{attrs:{to:{name:"EditRecipe",params:{id:t._id}}}},[e._v("Edit")]),e._v(" |\n          "),a("a",{attrs:{href:"#"},on:{click:function(a){e.deleteRecipe(t._id)}}},[e._v("Delete")])],1)])})],2)],1):a("div",[e._v("\n    There are no recipes.. Lets add one now "),a("br"),a("br"),e._v(" "),a("router-link",{staticClass:"add_recipe_link",attrs:{to:{name:"NewRecipe"}}},[e._v("Add Recipe")])],1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h1",[this._v("Recipes")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("td",[this._v("Title")]),this._v(" "),t("td",{attrs:{width:"550"}},[this._v("Comment")]),this._v(" "),t("td",{attrs:{width:"100",align:"center"}},[this._v("Action")])])}]};var fe=a("VU/8")(me,he,!1,function(e){a("K6I3")},"data-v-26112e46",null).exports,ve={title:"",comment:"",url:""},_e={name:"NewRecipe",components:{EditRecipe:X},data:function(){return{recipeData:f.a.clone(ve)}},methods:{addRecipe:function(e){var t=this;this.$store.dispatch("recipes/addRecipe",e).then(function(){t.$router.push({name:"Recipes"})})}}},ke={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"recipes"},[t("h1",[this._v("Add Recipe")]),this._v(" "),t("edit-recipe",{attrs:{recipeData:this.recipeData},on:{"save-recipe":this.addRecipe}})],1)},staticRenderFns:[]};var we=a("VU/8")(_e,ke,!1,function(e){a("gK5w")},null,null).exports;n.a.use(d.a),n.a.use(m.a,{issuer:"https://dev-633272.oktapreview.com/oauth2/default",client_id:"0oafnx0ia8m18WlAR0h7",redirect_uri:window.location.origin+"/implicit/callback",scope:"openid profile email"});var ge=new d.a({mode:"history",routes:[{path:"/",name:"Welcome",component:S},{path:"/implicit/callback",component:m.a.handleCallback()},{path:"/import/recipes",name:"ImportRecipes",component:R,meta:{requiresAuth:!0}},{path:"/import/meals",name:"ImportMeals",component:W,meta:{requiresAuth:!0}},{path:"/week/:year/:week",name:"Week",component:le,meta:{requiresAuth:!0}},{path:"/week",name:"Current Week",component:le,meta:{requiresAuth:!0}},{path:"/meals",name:"Meals",component:pe,meta:{requiresAuth:!0}},{path:"/meals/new",name:"NewMeal",component:re,meta:{requiresAuth:!0}},{path:"/recipes",name:"Recipes",component:fe,meta:{requiresAuth:!0}},{path:"/recipes/new",name:"NewRecipe",component:we,meta:{requiresAuth:!0}}]});ge.beforeEach(n.a.prototype.$auth.authRedirectGuard());var je=ge,xe=a("//Fk"),ye=a.n(xe),Me={namespaced:!0,state:{list:[]},getters:{mealList:function(e){return e.list},mealsInWeek:function(e){return function(t){return e.list.filter(function(e){var a=A()(e.date);return a.isoWeek()===t.week&&a.isoWeekYear()===t.year})}}},actions:{loadMealList:function(e){var t=e.commit;T().then(function(e){t("setMealList",{list:e.meals})},function(e){console.log(e)})},loadMealsInWeek:function(e,t){var a=e.commit;z(t).then(function(e){e.meals.forEach(function(e){a("setMeal",{meal:e})})},function(e){console.log(e)})},addMeal:function(e,t){var a=e.commit;e.state;return new ye.a(function(e,n){U({title:t.title,comment:t.comment,recipes:t.recipes,date:t.date,wpId:t.wpId}).then(function(t){a("setMeal",{meal:t.meal}),e()},function(e){console.log(e)})})},updateMeal:function(e,t){var a=e.commit;e.state;return new ye.a(function(e,n){P({_id:t._id,title:t.title,comment:t.comment,recipes:t.recipes,date:t.date,wpId:t.wpId}).then(function(t){a("setMeal",{meal:t.meal}),e()},function(e){console.log(e)})})},deleteMeal:function(e,t){var a=e.commit,n=e.state;F(t).then(function(e){a("setMealList",{list:f.a.reject(n.list,{_id:t})})},function(e){console.log(e)})}},mutations:{setMealList:function(e,t){var a=t.list;e.list=a},setMeal:function(e,t){var a=t.meal,n=f.a.findIndex(e.list,{_id:a._id});-1!==n&&e.list.splice(n,1),e.list.unshift(a)}}},Re={namespaced:!0,state:{list:[],syncTimestamp:void 0},getters:{recipeList:function(e){return e.list},recipeById:function(e){return function(t){return f.a.find(e.list,{_id:t})}}},actions:{loadRecipeList:function(e){var t=e.commit,a=e.state,n=A()().diff(a.syncTimestamp,"minutes");if(a.syncTimestamp&&n<5)return console.log("Recipes Cached not updated");O().then(function(e){e.recipes&&t("setRecipeList",{list:e.recipes})},function(e){console.log(e)})},addRecipe:function(e,t){var a=e.commit;e.state;return new ye.a(function(e,n){q({title:t.title,comment:t.comment,url:t.url,wpId:t.wpId}).then(function(t){a("setRecipe",{recipe:t.recipe}),e()},function(e){console.log(e)})})},updateRecipe:function(e,t){var a=e.commit;e.state;return new ye.a(function(e,n){V({_id:t._id,title:t.title,comment:t.comment,url:t.url,wpId:t.wpId}).then(function(t){a("setRecipe",{recipe:t.recipe}),e()},function(e){console.log(e)})})},deleteRecipe:function(e,t){var a=e.commit,n=e.state;B(t).then(function(e){a("setRecipeList",{list:f.a.reject(n.list,{_id:t})})},function(e){console.log(e)})}},mutations:{setRecipeList:function(e,t){var a=t.list;e.list=a,e.syncTimestamp=A()()},setRecipe:function(e,t){var a=t.recipe,n=f.a.findIndex(e.list,{_id:a._id});-1!==n&&e.list.splice(n,1),e.list.unshift(a)}}};n.a.use(N.a);var be=new N.a.Store({modules:{meals:Me,recipes:Re},state:{},actions:{},mutations:{},getters:{}}),Ce=a("XTKK");n.a.use(Ce.a),n.a.config.productionTip=!1,new n.a({el:"#app",router:je,store:be,components:{App:u},template:"<App/>"})},gK5w:function(e,t){},hDnw:function(e,t){},jj9N:function(e,t){},otDY:function(e,t){},uSYS:function(e,t){},uslO:function(e,t,a){var n={"./af":"3CJN","./af.js":"3CJN","./ar":"3MVc","./ar-dz":"tkWw","./ar-dz.js":"tkWw","./ar-kw":"j8cJ","./ar-kw.js":"j8cJ","./ar-ly":"wPpW","./ar-ly.js":"wPpW","./ar-ma":"dURR","./ar-ma.js":"dURR","./ar-sa":"7OnE","./ar-sa.js":"7OnE","./ar-tn":"BEem","./ar-tn.js":"BEem","./ar.js":"3MVc","./az":"eHwN","./az.js":"eHwN","./be":"3hfc","./be.js":"3hfc","./bg":"lOED","./bg.js":"lOED","./bm":"hng5","./bm.js":"hng5","./bn":"aM0x","./bn.js":"aM0x","./bo":"w2Hs","./bo.js":"w2Hs","./br":"OSsP","./br.js":"OSsP","./bs":"aqvp","./bs.js":"aqvp","./ca":"wIgY","./ca.js":"wIgY","./cs":"ssxj","./cs.js":"ssxj","./cv":"N3vo","./cv.js":"N3vo","./cy":"ZFGz","./cy.js":"ZFGz","./da":"YBA/","./da.js":"YBA/","./de":"DOkx","./de-at":"8v14","./de-at.js":"8v14","./de-ch":"Frex","./de-ch.js":"Frex","./de.js":"DOkx","./dv":"rIuo","./dv.js":"rIuo","./el":"CFqe","./el.js":"CFqe","./en-au":"Sjoy","./en-au.js":"Sjoy","./en-ca":"Tqun","./en-ca.js":"Tqun","./en-gb":"hPuz","./en-gb.js":"hPuz","./en-ie":"ALEw","./en-ie.js":"ALEw","./en-il":"QZk1","./en-il.js":"QZk1","./en-nz":"dyB6","./en-nz.js":"dyB6","./eo":"Nd3h","./eo.js":"Nd3h","./es":"LT9G","./es-do":"7MHZ","./es-do.js":"7MHZ","./es-us":"INcR","./es-us.js":"INcR","./es.js":"LT9G","./et":"XlWM","./et.js":"XlWM","./eu":"sqLM","./eu.js":"sqLM","./fa":"2pmY","./fa.js":"2pmY","./fi":"nS2h","./fi.js":"nS2h","./fo":"OVPi","./fo.js":"OVPi","./fr":"tzHd","./fr-ca":"bXQP","./fr-ca.js":"bXQP","./fr-ch":"VK9h","./fr-ch.js":"VK9h","./fr.js":"tzHd","./fy":"g7KF","./fy.js":"g7KF","./gd":"nLOz","./gd.js":"nLOz","./gl":"FuaP","./gl.js":"FuaP","./gom-latn":"+27R","./gom-latn.js":"+27R","./gu":"rtsW","./gu.js":"rtsW","./he":"Nzt2","./he.js":"Nzt2","./hi":"ETHv","./hi.js":"ETHv","./hr":"V4qH","./hr.js":"V4qH","./hu":"xne+","./hu.js":"xne+","./hy-am":"GrS7","./hy-am.js":"GrS7","./id":"yRTJ","./id.js":"yRTJ","./is":"upln","./is.js":"upln","./it":"FKXc","./it.js":"FKXc","./ja":"ORgI","./ja.js":"ORgI","./jv":"JwiF","./jv.js":"JwiF","./ka":"RnJI","./ka.js":"RnJI","./kk":"j+vx","./kk.js":"j+vx","./km":"5j66","./km.js":"5j66","./kn":"gEQe","./kn.js":"gEQe","./ko":"eBB/","./ko.js":"eBB/","./ky":"6cf8","./ky.js":"6cf8","./lb":"z3hR","./lb.js":"z3hR","./lo":"nE8X","./lo.js":"nE8X","./lt":"/6P1","./lt.js":"/6P1","./lv":"jxEH","./lv.js":"jxEH","./me":"svD2","./me.js":"svD2","./mi":"gEU3","./mi.js":"gEU3","./mk":"Ab7C","./mk.js":"Ab7C","./ml":"oo1B","./ml.js":"oo1B","./mn":"CqHt","./mn.js":"CqHt","./mr":"5vPg","./mr.js":"5vPg","./ms":"ooba","./ms-my":"G++c","./ms-my.js":"G++c","./ms.js":"ooba","./mt":"oCzW","./mt.js":"oCzW","./my":"F+2e","./my.js":"F+2e","./nb":"FlzV","./nb.js":"FlzV","./ne":"/mhn","./ne.js":"/mhn","./nl":"3K28","./nl-be":"Bp2f","./nl-be.js":"Bp2f","./nl.js":"3K28","./nn":"C7av","./nn.js":"C7av","./pa-in":"pfs9","./pa-in.js":"pfs9","./pl":"7LV+","./pl.js":"7LV+","./pt":"ZoSI","./pt-br":"AoDM","./pt-br.js":"AoDM","./pt.js":"ZoSI","./ro":"wT5f","./ro.js":"wT5f","./ru":"ulq9","./ru.js":"ulq9","./sd":"fW1y","./sd.js":"fW1y","./se":"5Omq","./se.js":"5Omq","./si":"Lgqo","./si.js":"Lgqo","./sk":"OUMt","./sk.js":"OUMt","./sl":"2s1U","./sl.js":"2s1U","./sq":"V0td","./sq.js":"V0td","./sr":"f4W3","./sr-cyrl":"c1x4","./sr-cyrl.js":"c1x4","./sr.js":"f4W3","./ss":"7Q8x","./ss.js":"7Q8x","./sv":"Fpqq","./sv.js":"Fpqq","./sw":"DSXN","./sw.js":"DSXN","./ta":"+7/x","./ta.js":"+7/x","./te":"Nlnz","./te.js":"Nlnz","./tet":"gUgh","./tet.js":"gUgh","./tg":"5SNd","./tg.js":"5SNd","./th":"XzD+","./th.js":"XzD+","./tl-ph":"3LKG","./tl-ph.js":"3LKG","./tlh":"m7yE","./tlh.js":"m7yE","./tr":"k+5o","./tr.js":"k+5o","./tzl":"iNtv","./tzl.js":"iNtv","./tzm":"FRPF","./tzm-latn":"krPU","./tzm-latn.js":"krPU","./tzm.js":"FRPF","./ug-cn":"To0v","./ug-cn.js":"To0v","./uk":"ntHu","./uk.js":"ntHu","./ur":"uSe8","./ur.js":"uSe8","./uz":"XU1s","./uz-latn":"/bsm","./uz-latn.js":"/bsm","./uz.js":"XU1s","./vi":"0X8Q","./vi.js":"0X8Q","./x-pseudo":"e/KL","./x-pseudo.js":"e/KL","./yo":"YXlc","./yo.js":"YXlc","./zh-cn":"Vz2w","./zh-cn.js":"Vz2w","./zh-hk":"ZUyn","./zh-hk.js":"ZUyn","./zh-tw":"BbgG","./zh-tw.js":"BbgG"};function s(e){return a(i(e))}function i(e){var t=n[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}s.keys=function(){return Object.keys(n)},s.resolve=i,e.exports=s,s.id="uslO"},"wK/w":function(e,t,a){"use strict";var n=a("BDm9"),s=a.n(n),i={name:"VueFuse",data:function(){return{fuse:null,value:"",result:[]}},props:{placeholder:{type:String,default:""},search:{type:String,default:""},eventName:{type:String,default:"fuseResultsUpdated"},inputChangeEventName:{type:String,default:"fuseInputChanged"},defaultAll:{type:Boolean,default:!0},list:{type:Array},caseSensitive:{type:Boolean,default:!1},includeScore:{type:Boolean,default:!1},includeMatches:{type:Boolean,default:!1},tokenize:{type:Boolean,default:!1},matchAllTokens:{type:Boolean,default:!1},findAllMatches:{type:Boolean,default:!1},id:{type:String,default:""},shouldSort:{type:Boolean,default:!0},threshold:{type:Number,default:.6},location:{type:Number,default:0},distance:{type:Number,default:100},maxPatternLength:{type:Number,default:32},minMatchCharLength:{type:Number,default:1},keys:{type:Array}},computed:{options:function(){var e={caseSensitive:this.caseSensitive,includeScore:this.includeScore,includeMatches:this.includeMatches,tokenize:this.tokenize,matchAllTokens:this.matchAllTokens,findAllMatches:this.findAllMatches,shouldSort:this.shouldSort,threshold:this.threshold,location:this.location,distance:this.distance,maxPatternLength:this.maxPatternLength,minMatchCharLength:this.minMatchCharLength,keys:this.keys};return""!==this.id&&(e.id=this.id),e}},watch:{list:function(){this.fuse.list=this.list,this.fuseSearch()},search:function(){this.value=this.search},value:function(){this.$parent.$emit(this.inputChangeEventName,this.value),this.fuseSearch()},result:function(){this.$parent.$emit(this.eventName,this.result)}},methods:{initFuse:function(){this.fuse=new s.a(this.list,this.options),this.defaultAll&&(this.result=this.list),this.search&&(this.value=this.search)},fuseSearch:function(){""===this.value.trim()?this.defaultAll?this.result=this.list:this.result=[]:this.result=this.fuse.search(this.value.trim())}},ready:function(){this.initFuse()},mounted:function(){this.initFuse()}},r={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"value"}],attrs:{type:"search",placeholder:e.placeholder},domProps:{value:e.value},on:{input:function(t){t.target.composing||(e.value=t.target.value)}}})},staticRenderFns:[]},c=a("VU/8")(i,r,!1,null,null,null);t.a=c.exports},"y/Yf":function(e,t){},zMri:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9f8e0e22e2f838c56d2c.js.map